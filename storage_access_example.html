<!DOCTYPE HTML>
<html lang="en-US" dir="ltr">
    <head>
        <meta charset="utf-8">
    </head>
    <body>
      <h3>Cookie setting and getting</h3>
      <button onclick='setAndGetCookie()'>Set and Get cookie via document.cookie</button><br />
      <p>Trying to set cookie with value:</p><pre id='cookie_set'></pre>
      <p>Your current non-HTTPOnly cookies are:</p><pre id='cookie_read'></pre>


      <h3>Click the button below to log in!</h3>
      <button onclick='tryToAccess()'>Log In</button><br />

      <script>
        function setAndGetCookie() {
          // Try to set a cookie
          var randVal = Math.random();
          var set = document.getElementById('cookie_set');
          set.innerHTML = randVal;
          document.cookie = 'testPageCookie='+randVal;

          // Get a cookie
          var get = document.getElementById('cookie_read');
          var cookies = document.cookie;
          get.innerHTML = cookies;
        }

        function tryToAccess() {
          document.hasStorageAccess().then(hasAccess => {
            if (!hasAccess) {
              return document.requestStorageAccess();
            }
          }).then(
            _ => {console.log("Access granted!")},
            _ => {console.log("Access denied!")}
          ).catch(_ => {
            console.log("Error obtaining storage access");
          });
        }
      </script>
    </body>
</html>

